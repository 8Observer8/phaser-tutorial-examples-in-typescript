{"version":3,"sources":["../node_modules/browser-pack/_prelude.js","src/Boot.ts","src/Game.ts","src/Level.ts"],"names":[],"mappings":"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","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","/// <reference path=\"./libs/phaser.d.ts\" />\r\n\r\nexport namespace FirstGame\r\n{\r\n    export class Boot extends Phaser.State\r\n    {\r\n        constructor()\r\n        {\r\n            super();\r\n        }\r\n\r\n        init()\r\n        {\r\n            this.game.scale.scaleMode = Phaser.ScaleManager.SHOW_ALL;\r\n            this.game.scale.pageAlignHorizontally = true;\r\n            this.game.scale.pageAlignVertically = true;\r\n        }\r\n\r\n        preload()\r\n        {\r\n            this.load.image('sky', './assets/sky.png');\r\n            this.load.image('ground', './assets/platform.png');\r\n            this.load.image('star', './assets/star.png');\r\n            this.load.spritesheet('dude', './assets/dude.png', 32, 48);\r\n        }\r\n\r\n        create()\r\n        {\r\n            this.game.state.start('Level');\r\n        }\r\n    }\r\n}\r\n","/// <reference path=\"./libs/phaser.d.ts\" />\r\n\r\nimport * as BootModule from \"./Boot\";\r\nimport Boot = BootModule.FirstGame.Boot;\r\n\r\nimport * as LevelModule from \"./Level\";\r\nimport Level = LevelModule.FirstGame.Level;\r\n\r\nexport namespace FirstGame\r\n{\r\n    export class Game extends Phaser.Game\r\n    {\r\n        constructor()\r\n        {\r\n            super(800, 600, Phaser.AUTO, '');\r\n            this.state.add('Boot', Boot);\r\n            this.state.add('Level', Level);\r\n            this.state.start('Boot');\r\n        }\r\n    }\r\n}\r\n\r\nwindow.onload = () =>\r\n{\r\n    new FirstGame.Game();\r\n};\r\n","export namespace FirstGame\r\n{\r\n    export class Level extends Phaser.State\r\n    {\r\n        constructor()\r\n        {\r\n            super();\r\n        }\r\n\r\n        platforms: Phaser.Group;\r\n        player: Phaser.Sprite;\r\n        cursors: Phaser.CursorKeys;\r\n        stars: Phaser.Group;\r\n        scoreText: Phaser.Text;\r\n        score: number;\r\n\r\n        init()\r\n        {\r\n            this.score = 0;\r\n        }\r\n\r\n        create()\r\n        {\r\n            this.game.physics.startSystem(Phaser.Physics.ARCADE);\r\n            this.game.add.sprite(0, 0, 'sky');\r\n\r\n            // Creating ground and platforms\r\n            this.platforms = this.game.add.group();\r\n            this.platforms.enableBody = true;\r\n\r\n            let ground: Phaser.Sprite = this.platforms.create(0, this.game.world.height - 64, 'ground');\r\n            ground.scale.setTo(2, 2);\r\n            ground.body.immovable = true;\r\n\r\n            let ledge: Phaser.Sprite = this.platforms.create(400, 400, 'ground');\r\n            ledge.body.immovable = true;\r\n\r\n            ledge = this.platforms.create(-150, 250, 'ground');\r\n            ledge.body.immovable = true;\r\n\r\n            //Creating player\r\n            this.player = this.game.add.sprite(32, this.game.world.height - 150, 'dude');\r\n\r\n            this.game.physics.enable(this.player);\r\n\r\n            this.player.body.bounce.y = 0.2;\r\n            this.player.body.gravity.y = 600;\r\n            this.player.body.collideWorldBounds = true;\r\n\r\n            // Adding Player animations\r\n            this.player.animations.add('left', [0, 1, 2, 3], 10, true);\r\n            this.player.animations.add('right', [5, 6, 7, 8], 10, true);\r\n\r\n            // Adding Stars\r\n            this.stars = this.game.add.group();\r\n            this.stars.enableBody = true;\r\n\r\n            for (let i = 0; i < 12; i++)\r\n            {\r\n                let star: Phaser.Sprite = this.stars.create(i * 70, 0, 'star');\r\n                star.body.gravity.y = 500;\r\n                star.body.bounce.y = 0.3 + Math.random() * 0.2;\r\n            }\r\n\r\n            // Adding Score Text\r\n            this.scoreText = this.game.add.text(16, 16, 'score: 0', { fontSize: 64, fill: '#000' });\r\n\r\n            // Adding keyboard input listener\r\n            this.cursors = this.game.input.keyboard.createCursorKeys();\r\n        }\r\n\r\n        update()\r\n        {\r\n            this.game.physics.arcade.collide(this.player, this.platforms);\r\n            this.game.physics.arcade.collide(this.stars, this.platforms);\r\n            this.game.physics.arcade.overlap(this.player, this.stars, this.collect, null, this);\r\n\r\n            this.player.body.velocity.x = 0;\r\n\r\n            if (this.cursors.left.isDown)\r\n            {\r\n                this.player.body.velocity.x = -200;\r\n                this.player.animations.play('left');\r\n            }\r\n            else if (this.cursors.right.isDown)\r\n            {\r\n                this.player.body.velocity.x = 200;\r\n                this.player.animations.play('right');\r\n            }\r\n            else\r\n            {\r\n                this.player.animations.stop();\r\n                this.player.frame = 4;\r\n            }\r\n\r\n            if (this.cursors.up.isDown && this.player.body.touching.down)\r\n            {\r\n                this.player.body.velocity.y = -450;\r\n            }\r\n        }\r\n\r\n        collect(player: Phaser.Sprite, star: Phaser.Sprite)\r\n        {\r\n            star.kill();\r\n\r\n            this.score += 10;\r\n            this.scoreText.text = 'Score: ' + this.score;\r\n        }\r\n    }\r\n}\r\n"],"preExistingComment":"//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uL25vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvQm9vdC50cyIsInNyYy9HYW1lLnRzIiwic3JjL0xldmVsLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBOztBQ0FBLDJDQUEyQzs7Ozs7Ozs7Ozs7O0FBRTNDLElBQWlCLFNBQVMsQ0E2QnpCO0FBN0JELFdBQWlCLFNBQVM7SUFFdEI7UUFBMEIsd0JBQVk7UUFFbEM7bUJBRUksaUJBQU87UUFDWCxDQUFDO1FBRUQsbUJBQUksR0FBSjtZQUVJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsWUFBWSxDQUFDLFFBQVEsQ0FBQztZQUN6RCxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsR0FBRyxJQUFJLENBQUM7WUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsbUJBQW1CLEdBQUcsSUFBSSxDQUFDO1FBQy9DLENBQUM7UUFFRCxzQkFBTyxHQUFQO1lBRUksSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsS0FBSyxFQUFFLGtCQUFrQixDQUFDLENBQUM7WUFDM0MsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxFQUFFLHVCQUF1QixDQUFDLENBQUM7WUFDbkQsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxFQUFFLG1CQUFtQixDQUFDLENBQUM7WUFDN0MsSUFBSSxDQUFDLElBQUksQ0FBQyxXQUFXLENBQUMsTUFBTSxFQUFFLG1CQUFtQixFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztRQUMvRCxDQUFDO1FBRUQscUJBQU0sR0FBTjtZQUVJLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLEtBQUssQ0FBQyxPQUFPLENBQUMsQ0FBQztRQUNuQyxDQUFDO1FBQ0wsV0FBQztJQUFELENBMUJBLEFBMEJDLENBMUJ5QixNQUFNLENBQUMsS0FB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LEVBQUUsRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEdBQUcsR0FBRyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1lBRTdFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7WUFFdEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDaEMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUMsR0FBRyxHQUFHLENBQUM7WUFDakMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsa0JBQWtCLEdBQUcsSUFBSSxDQUFDO1lBRTNDLDJCQUEyQjtZQUMzQixJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxHQUFHLENBQUMsTUFBTSxFQUFFLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQzNELElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsSUFBSSxDQUFDLENBQUM7WUFFNUQsZUFBZTtZQUNmLElBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsS0FBSyxFQUFFLENBQUM7WUFDbkMsSUFBSSxDQUFDLEtBQUssQ0FBQyxVQUFVLEdBQUcsSUFBSSxDQUFDO1lBRTdCLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxFQUMzQixDQUFDO2dCQUNHLElBQUksSUFBSSxHQUFrQixJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsRUFBRSxNQUFNLENBQUMsQ0FBQztnQkFDL0QsSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsQ0FBQyxHQUFHLEdBQUcsQ0FBQztnQkFDMUIsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxHQUFHLEdBQUcsR0FBRyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsR0FBRyxDQUFDO1lBQ25ELENBQUM7WUFFRCxvQkFBb0I7WUFDcEIsSUFBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxVQUFVLEVBQUUsRUFBRSxRQUFRLEVBQUUsRUFBRSxFQUFFLElBQUksRUFBRSxNQUFNLEVBQUUsQ0FBQyxDQUFDO1lBRXhGLGlDQUFpQztZQUNqQyxJQUFJLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLFFBQVEsQ0FBQyxnQkFBZ0IsRUFBRSxDQUFDO1FBQy9ELENBQUM7UUFFRCxzQkFBTSxHQUFOO1lBRUksSUFBSSxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztZQUM5RCxJQUFJLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1lBQzdELElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxPQUFPLEVBQUUsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBRXBGLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1lBRWhDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUM3QixDQUFDO2dCQUNHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUM7Z0JBQ25DLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQztZQUN4QyxDQUFDO1lBQ0QsSUFBSSxDQUFDLEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUNuQyxDQUFDO2dCQUNHLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUFDLEdBQUcsR0FBRyxDQUFDO2dCQUNsQyxJQUFJLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsT0FBTyxDQUFDLENBQUM7WUFDekMsQ0FBQztZQUNELElBQUksQ0FDSixDQUFDO2dCQUNHLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxDQUFDO2dCQUM5QixJQUFJLENBQUMsTUFBTSxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUM7WUFDMUIsQ0FBQztZQUVELEVBQUUsQ0FBQyxDQUFDLElBQUksQ0FBQyxPQUFPLENBQUMsRUFBRSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLENBQzdELENBQUM7Z0JBQ0csSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQztZQUN2QyxDQUFDO1FBQ0wsQ0FBQztRQUVELHVCQUFPLEdBQVAsVUFBUSxNQUFxQixFQUFFLElBQW1CO1lBRTlDLElBQUksQ0FBQyxJQUFJLEVBQUUsQ0FBQztZQUVaLElBQUksQ0FBQyxLQUFLLElBQUksRUFBRSxDQUFDO1lBQ2pCLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxHQUFHLFNBQVMsR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ2pELENBQUM7UUFDTCxZQUFDO0lBQUQsQ0ExR0EsQUEwR0MsQ0ExRzBCLE1BQU0sQ0FBQyxLQUFLLEdBMEd0QztJQTFHWSxlQUFLLFFBMEdqQixDQUFBO0FBQ0wsQ0FBQyxFQTdHZ0IsU0FBUyxHQUFULGlCQUFTLEtBQVQsaUJBQVMsUUE2R3pCIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gZSh0LG4scil7ZnVuY3Rpb24gcyhvLHUpe2lmKCFuW29dKXtpZighdFtvXSl7dmFyIGE9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtpZighdSYmYSlyZXR1cm4gYShvLCEwKTtpZihpKXJldHVybiBpKG8sITApO3ZhciBmPW5ldyBFcnJvcihcIkNhbm5vdCBmaW5kIG1vZHVsZSAnXCIrbytcIidcIik7dGhyb3cgZi5jb2RlPVwiTU9EVUxFX05PVF9GT1VORFwiLGZ9dmFyIGw9bltvXT17ZXhwb3J0czp7fX07dFtvXVswXS5jYWxsKGwuZXhwb3J0cyxmdW5jdGlvbihlKXt2YXIgbj10W29dWzFdW2VdO3JldHVybiBzKG4/bjplKX0sbCxsLmV4cG9ydHMsZSx0LG4scil9cmV0dXJuIG5bb10uZXhwb3J0c312YXIgaT10eXBlb2YgcmVxdWlyZT09XCJmdW5jdGlvblwiJiZyZXF1aXJlO2Zvcih2YXIgbz0wO288ci5sZW5ndGg7bysrKXMocltvXSk7cmV0dXJuIHN9KSIsIi8vLyA8cmVmZXJlbmNlIHBhdGg9XCIuL2xpYnMvcGhhc2VyLmQudHNcIiAvPlxyXG5cclxuZXhwb3J0IG5hbWVzcGFjZSBGaXJzdEdhbWVcclxue1xyXG4gICAgZXhwb3J0IGNsYXNzIEJvb3QgZXh0ZW5kcyBQaGFzZXIuU3RhdGVcclxuICAgIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW5pdCgpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICB0aGlzLmdhbWUuc2NhbGUuc2NhbGVNb2RlID0gUGhhc2VyLlNjYWxlTWFuYWdlci5TSE9XX0FMTDtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnNjYWxlLnBhZ2VBbGlnbkhvcml6b250YWxseSA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5zY2FsZS5wYWdlQWxpZ25WZXJ0aWNhbGx5ID0gdHJ1ZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHByZWxvYWQoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdza3knLCAnLi9hc3NldHMvc2t5LnBuZycpO1xyXG4gICAgICAgICAgICB0aGlzLmxvYWQuaW1hZ2UoJ2dyb3VuZCcsICcuL2Fzc2V0cy9wbGF0Zm9ybS5wbmcnKTtcclxuICAgICAgICAgICAgdGhpcy5sb2FkLmltYWdlKCdzdGFyJywgJy4vYXNzZXRzL3N0YXIucG5nJyk7XHJcbiAgICAgICAgICAgIHRoaXMubG9hZC5zcHJpdGVzaGVldCgnZHVkZScsICcuL2Fzc2V0cy9kdWRlLnBuZycsIDMyLCA0OCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjcmVhdGUoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnN0YXRlLnN0YXJ0KCdMZXZlbCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG4iLCIvLy8gPHJlZmVyZW5jZSBwYXRoPVwiLi9saWJzL3BoYXNlci5kLnRzXCIgLz5cclxuXHJcbmltcG9ydCAqIGFzIEJvb3RNb2R1bGUgZnJvbSBcIi4vQm9vdFwiO1xyXG5pbXBvcnQgQm9vdCA9IEJvb3RNb2R1bGUuRmlyc3RHYW1lLkJvb3Q7XHJcblxyXG5pbXBvcnQgKiBhcyBMZXZlbE1vZHVsZSBmcm9tIFwiLi9MZXZlbFwiO1xyXG5pbXBvcnQgTGV2ZWwgPSBMZXZlbE1vZHVsZS5GaXJzdEdhbWUuTGV2ZWw7XHJcblxyXG5leHBvcnQgbmFtZXNwYWNlIEZpcnN0R2FtZVxyXG57XHJcbiAgICBleHBvcnQgY2xhc3MgR2FtZSBleHRlbmRzIFBoYXNlci5HYW1lXHJcbiAgICB7XHJcbiAgICAgICAgY29uc3RydWN0b3IoKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3VwZXIoODAwLCA2MDAsIFBoYXNlci5BVVRPLCAnJyk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWRkKCdCb290JywgQm9vdCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhdGUuYWRkKCdMZXZlbCcsIExldmVsKTtcclxuICAgICAgICAgICAgdGhpcy5zdGF0ZS5zdGFydCgnQm9vdCcpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxud2luZG93Lm9ubG9hZCA9ICgpID0+XHJcbntcclxuICAgIG5ldyBGaXJzdEdhbWUuR2FtZSgpO1xyXG59O1xyXG4iLCJleHBvcnQgbmFtZXNwYWNlIEZpcnN0R2FtZVxyXG57XHJcbiAgICBleHBvcnQgY2xhc3MgTGV2ZWwgZXh0ZW5kcyBQaGFzZXIuU3RhdGVcclxuICAgIHtcclxuICAgICAgICBjb25zdHJ1Y3RvcigpXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBzdXBlcigpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcGxhdGZvcm1zOiBQaGFzZXIuR3JvdXA7XHJcbiAgICAgICAgcGxheWVyOiBQaGFzZXIuU3ByaXRlO1xyXG4gICAgICAgIGN1cnNvcnM6IFBoYXNlci5DdXJzb3JLZXlzO1xyXG4gICAgICAgIHN0YXJzOiBQaGFzZXIuR3JvdXA7XHJcbiAgICAgICAgc2NvcmVUZXh0OiBQaGFzZXIuVGV4dDtcclxuICAgICAgICBzY29yZTogbnVtYmVyO1xyXG5cclxuICAgICAgICBpbml0KClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmUgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY3JlYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLnN0YXJ0U3lzdGVtKFBoYXNlci5QaHlzaWNzLkFSQ0FERSk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5hZGQuc3ByaXRlKDAsIDAsICdza3knKTtcclxuXHJcbiAgICAgICAgICAgIC8vIENyZWF0aW5nIGdyb3VuZCBhbmQgcGxhdGZvcm1zXHJcbiAgICAgICAgICAgIHRoaXMucGxhdGZvcm1zID0gdGhpcy5nYW1lLmFkZC5ncm91cCgpO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXRmb3Jtcy5lbmFibGVCb2R5ID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBncm91bmQ6IFBoYXNlci5TcHJpdGUgPSB0aGlzLnBsYXRmb3Jtcy5jcmVhdGUoMCwgdGhpcy5nYW1lLndvcmxkLmhlaWdodCAtIDY0LCAnZ3JvdW5kJyk7XHJcbiAgICAgICAgICAgIGdyb3VuZC5zY2FsZS5zZXRUbygyLCAyKTtcclxuICAgICAgICAgICAgZ3JvdW5kLmJvZHkuaW1tb3ZhYmxlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgICAgIGxldCBsZWRnZTogUGhhc2VyLlNwcml0ZSA9IHRoaXMucGxhdGZvcm1zLmNyZWF0ZSg0MDAsIDQwMCwgJ2dyb3VuZCcpO1xyXG4gICAgICAgICAgICBsZWRnZS5ib2R5LmltbW92YWJsZSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBsZWRnZSA9IHRoaXMucGxhdGZvcm1zLmNyZWF0ZSgtMTUwLCAyNTAsICdncm91bmQnKTtcclxuICAgICAgICAgICAgbGVkZ2UuYm9keS5pbW1vdmFibGUgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy9DcmVhdGluZyBwbGF5ZXJcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIgPSB0aGlzLmdhbWUuYWRkLnNwcml0ZSgzMiwgdGhpcy5nYW1lLndvcmxkLmhlaWdodCAtIDE1MCwgJ2R1ZGUnKTtcclxuXHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmVuYWJsZSh0aGlzLnBsYXllcik7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5ib2R5LmJvdW5jZS55ID0gMC4yO1xyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5ib2R5LmdyYXZpdHkueSA9IDYwMDtcclxuICAgICAgICAgICAgdGhpcy5wbGF5ZXIuYm9keS5jb2xsaWRlV29ybGRCb3VuZHMgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkaW5nIFBsYXllciBhbmltYXRpb25zXHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmFuaW1hdGlvbnMuYWRkKCdsZWZ0JywgWzAsIDEsIDIsIDNdLCAxMCwgdHJ1ZSk7XHJcbiAgICAgICAgICAgIHRoaXMucGxheWVyLmFuaW1hdGlvbnMuYWRkKCdyaWdodCcsIFs1LCA2LCA3LCA4XSwgMTAsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgLy8gQWRkaW5nIFN0YXJzXHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnMgPSB0aGlzLmdhbWUuYWRkLmdyb3VwKCk7XHJcbiAgICAgICAgICAgIHRoaXMuc3RhcnMuZW5hYmxlQm9keSA9IHRydWU7XHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IDEyOyBpKyspXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGxldCBzdGFyOiBQaGFzZXIuU3ByaXRlID0gdGhpcy5zdGFycy5jcmVhdGUoaSAqIDcwLCAwLCAnc3RhcicpO1xyXG4gICAgICAgICAgICAgICAgc3Rhci5ib2R5LmdyYXZpdHkueSA9IDUwMDtcclxuICAgICAgICAgICAgICAgIHN0YXIuYm9keS5ib3VuY2UueSA9IDAuMyArIE1hdGgucmFuZG9tKCkgKiAwLjI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIEFkZGluZyBTY29yZSBUZXh0XHJcbiAgICAgICAgICAgIHRoaXMuc2NvcmVUZXh0ID0gdGhpcy5nYW1lLmFkZC50ZXh0KDE2LCAxNiwgJ3Njb3JlOiAwJywgeyBmb250U2l6ZTogNjQsIGZpbGw6ICcjMDAwJyB9KTtcclxuXHJcbiAgICAgICAgICAgIC8vIEFkZGluZyBrZXlib2FyZCBpbnB1dCBsaXN0ZW5lclxyXG4gICAgICAgICAgICB0aGlzLmN1cnNvcnMgPSB0aGlzLmdhbWUuaW5wdXQua2V5Ym9hcmQuY3JlYXRlQ3Vyc29yS2V5cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdXBkYXRlKClcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMucGxheWVyLCB0aGlzLnBsYXRmb3Jtcyk7XHJcbiAgICAgICAgICAgIHRoaXMuZ2FtZS5waHlzaWNzLmFyY2FkZS5jb2xsaWRlKHRoaXMuc3RhcnMsIHRoaXMucGxhdGZvcm1zKTtcclxuICAgICAgICAgICAgdGhpcy5nYW1lLnBoeXNpY3MuYXJjYWRlLm92ZXJsYXAodGhpcy5wbGF5ZXIsIHRoaXMuc3RhcnMsIHRoaXMuY29sbGVjdCwgbnVsbCwgdGhpcyk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnBsYXllci5ib2R5LnZlbG9jaXR5LnggPSAwO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuY3Vyc29ycy5sZWZ0LmlzRG93bilcclxuICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuYm9keS52ZWxvY2l0eS54ID0gLTIwMDtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmFuaW1hdGlvbnMucGxheSgnbGVmdCcpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGVsc2UgaWYgKHRoaXMuY3Vyc29ycy5yaWdodC5pc0Rvd24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmJvZHkudmVsb2NpdHkueCA9IDIwMDtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmFuaW1hdGlvbnMucGxheSgncmlnaHQnKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbHNlXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmFuaW1hdGlvbnMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5wbGF5ZXIuZnJhbWUgPSA0O1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAodGhpcy5jdXJzb3JzLnVwLmlzRG93biAmJiB0aGlzLnBsYXllci5ib2R5LnRvdWNoaW5nLmRvd24pXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIHRoaXMucGxheWVyLmJvZHkudmVsb2NpdHkueSA9IC00NTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbGxlY3QocGxheWVyOiBQaGFzZXIuU3ByaXRlLCBzdGFyOiBQaGFzZXIuU3ByaXRlKVxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgc3Rhci5raWxsKCk7XHJcblxyXG4gICAgICAgICAgICB0aGlzLnNjb3JlICs9IDEwO1xyXG4gICAgICAgICAgICB0aGlzLnNjb3JlVGV4dC50ZXh0ID0gJ1Njb3JlOiAnICsgdGhpcy5zY29yZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuIl19"}